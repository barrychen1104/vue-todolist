import{u as _,r as n,c as g,a as h,o as w,b as v,d as o,w as i,v as r,t as c,e as f,f as b,g as x}from"./index-HI7QsyaD.js";import{a as C}from"./axios-C8DqakIB.js";const k={id:"loginPage",class:"bg-yellow"},y={class:"conatiner loginPage vhContainer"},V=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),D={class:"formControls",action:"index.html"},T=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),U=o("label",{class:"formControls_label",for:"email"},"Email",-1),B=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),N="https://todolist-api.hexschool.io",E={__name:"LoginView",setup(S){const d=_(),s=n({email:"",password:""}),u=n(""),a=g(()=>({email:s.value.email?"":"此欄位不可為空",password:s.value.password?"":"此欄位不可為空"})),m=async()=>{try{const t=await C.post(`${N}/users/sign_in`,s.value);u.value=t.data.token;const e=new Date;e.setDate(e.getDate()+1),document.cookie=`customTodoToken=${t.data.token}; expires=${e.toUTCString()};`,d.push("/todolist")}catch{a.value.response="帳號或密碼錯誤",alert("帳號或密碼錯誤")}};return(t,e)=>{const p=h("router-link");return w(),v("div",k,[o("div",y,[V,o("div",null,[o("form",D,[T,U,i(o("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.email=l)},null,512),[[r,s.value.email]]),o("span",null,c(a.value.email),1),B,i(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.password=l)},null,512),[[r,s.value.password]]),o("span",null,c(a.value.password),1),o("input",{class:"formControls_btnSubmit",type:"button",onClick:m,value:"登入"}),f(p,{class:"formControls_btnLink",to:"/signup"},{default:b(()=>[x("註冊帳號")]),_:1})])])])])}}};export{E as default};
